# Wherite - 文章管理系统

**版本：ver 0.05**

## 项目简介

Wherite是一个基于SQLite数据库的文章管理系统，支持文章的查询、新建、编辑和删除。本版本采用图形化界面，提供更友好的用户体验。

## 功能特性

- 连接SQLite数据库
- 根据文章ID查询文章
- 新建文章（自动生成ID）
- 编辑并保存文章内容
- 图形化用户界面（GUI）
- 输入验证和错误处理
- 响应式布局设计
- 模块化代码架构，便于维护和扩展

## 技术栈

- **编程语言**: Go 1.25.4
- **GUI框架**: Gio v0.9.0（纯Go图形界面库）
- **数据库**: SQLite3
- **数据库驱动**: modernc.org/sqlite v1.26.0（纯Go实现，无需CGO）

## 数据库结构

### 表名：articles

| 字段 | 类型 | 说明 |
|------|------|------|
| id | INTEGER | 主键，自增 |
| title | TEXT | 文章标题 |
| content | TEXT | 文章内容 |

## 安装与运行

### 前置要求

- Go 1.25.4 或更高版本
- SQLite3 数据库文件 `wherite.sqlite3`

### 编译程序

```bash
go build -o wherite
```

## 使用说明

### 图形界面操作

1. 运行程序后，会打开一个图形界面窗口
2. 在顶部的ID输入框中输入要查询的文章ID
3. 点击"查询"按钮加载文章内容
4. 点击"新建"按钮可创建新文章（会自动清空输入框并生成新ID）
5. 文章标题和内容会显示在对应的输入框中，可以直接编辑
6. 编辑完成后，点击"保存"按钮将修改保存到数据库
7. 错误信息会显示在界面上，操作成功也会有相应提示

### 界面布局

```
┌─────────────────────────────────────────────────────────┐
│ [文章ID输入框]        [查询] [新建] [保存]              │
│                                                         │
│ 错误提示信息/成功提示（如有）                           │
│                                                         │
│ 标题:                                                   │
│ [标题输入框]                                            │
│                                                         │
│ 内容:                                                   │
│ [内容输入框]                                            │
│ [              可自适应高度的内容编辑区域              ] │
│ [              可自适应高度的内容编辑区域              ] │
└─────────────────────────────────────────────────────────┘
```

### 快捷操作

- 在ID输入框中按回车键可以直接查询
- 所有输入框都支持文本选择和复制粘贴
- 内容输入框支持多行文本编辑

## 项目结构

```
wherite/
├── wherite_main.go       # 主程序入口
├── wherite_gui.go        # 图形界面模块
├── wherite_database.go   # 数据库操作模块
├── go.mod                # Go模块依赖管理
├── go.sum                # 依赖校验文件
├── wherite.sqlite3       # SQLite数据库文件
└── README.md             # 项目说明文档
```

## 模块说明

### 1. 创建的模块文件

**wherite_database.go** - 数据库操作模块
- 包含所有数据库连接、查询、更新、删除等操作
- 定义了 Article 结构和 10 个操作数据库函数
- 使用纯 Go SQLite 驱动避免 CGO 依赖

**wherite_gui.go** - 图形界面模块
- 包含所有 GUI 渲染和交互事件处理代码
- 定义了 UI 结构和界面布局方法
- 实现了查询、新建、保存等用户交互功能

**wherite_main.go** - 主程序入口
- 作为程序启动点，负责模块协调
- 初始化数据库连接和图形界面
- 处理程序启动和退出流程

### 2. 模块间通信架构
```
wherite_main.go (主入口)
    ├── 调用 ConnectDB()、InitializeDatabase() (数据库模块)
    ├── 调用 NewUI() (GUI模块)
    └── 启动 app.Main() 事件循环

wherite_gui.go (GUI模块)
    ├── 调用 GetArticleByID() (数据库模块)
    ├── 调用 CreateArticle() (数据库模块)
    └── 调用 UpdateArticleByID() (数据库模块)

wherite_database.go (数据库模块)
    └── 独立的数据访问层，无外部依赖
```

## 技术说明

### 为什么选择 Gio GUI框架？

本项目选择 `Gio` 作为GUI框架，原因如下：

- **纯Go实现**：无需CGO，不依赖系统GUI库
- **跨平台兼容性**：在Windows、Linux、macOS上都能正常运行
- **现代化设计**：采用立即模式GUI，编程模型简洁
- **高性能**：基于GPU渲染，界面流畅
- **轻量级**：编译后的可执行文件体积小

### 为什么选择 modernc.org/sqlite？

本项目使用 `modernc.org/sqlite` 而非 `github.com/mattn/go-sqlite3`，原因如下：

- **纯Go实现**：无需CGO，不依赖GCC
- **跨平台兼容性**：在Windows、Linux、macOS上都能正常运行
- **编译简单**：无需配置CGO环境

## 版本历史

### ver 0.05

- 新增"新建"按钮，支持创建新文章
- 创建新文章后自动生成自增ID
- 实现新建和编辑两种保存模式
- 添加成功提示信息反馈
- 优化错误处理和用户体验

### ver 0.04 模块化拆分版

- 实现代码模块化拆分，分离关注点
- 创建 `wherite_main.go` 作为主入口程序
- 创建 `wherite_gui.go` 作为图形界面模块
- 创建 `wherite_database.go` 作为数据库操作模块
- 建立清晰的模块间通信架构
- 保持功能完整性，提高代码可维护性

### ver 0.03 图形化实验版

- 实现完整的图形用户界面
- 集成Gio GUI框架
- 实现文章内容的实时编辑功能
- 添加保存按钮和数据库更新功能
- 优化界面布局和用户体验
- 完善错误处理和用户反馈

### ver 0.02 GUI过渡版本

- 集成Gio GUI框架
- 实现基础图形界面布局
- 完成文章查询的图形化操作
- 解决CGO依赖问题

### ver 0.01 技术先行版本

- 实现基础数据库连接功能
- 实现文章查询功能
- 实现命令行交互界面
- 完成输入验证和错误处理

## 未来计划

- [ ] 支持多条件查询（按标题、内容搜索）
- [x] 支持文章添加功能
- [ ] 支持文章删除功能
- [ ] 支持文章列表显示
- [ ] 支持文章导出功能（PDF、TXT等格式）
- [ ] 添加快捷键支持
- [ ] 支持主题切换（深色/浅色模式）
- [ ] 支持数据备份和恢复
- [ ] Web界面支持

## 许可证

本项目仅供学习和研究使用。

## 联系方式

如有问题或建议，欢迎反馈。
