# 命令文档

> 当前版本: ver 0.11

本文档记录 Wherite 项目的命令和操作指南。

---

## [C01].[程序启动命令]

### [C01a].[直接启动]

命令：

```bash
# Windows 系统
wherite.exe

# Linux/macOS 系统
./wherite
```

功能：

- 启动 Wherite 文章管理系统
- 显示欢迎页面
- 加载最近打开的文章列表

### [C01b].[命令行参数]

当前版本不支持命令行参数，所有操作均通过图形界面完成。

## [C02].[图形界面操作]

### [C02a].[主界面布局]

Wherite 主界面分为三个主要区域：

1. **顶部工具栏**：包含搜索、新建、保存、删除、重命名、分类、标签、导出、备份、恢复、导入、数据导出、折叠等功能按钮
2. **左侧文章列表**：显示所有文章的标题、创建时间和摘要，支持点击查看文章内容
3. **右侧编辑区域**：显示文章标题和内容，可直接编辑，支持 Markdown 实时预览

### [C02b].[常用操作]

#### [C02b01].[新建文章]

操作步骤：

1. 点击顶部工具栏的"新建"按钮
2. 系统会创建一篇新文章，自动生成标题和内容
3. 在编辑区域修改文章标题和内容
4. 点击"保存"按钮保存文章

#### [C02b02].[打开文章]

操作步骤：

1. 在左侧文章列表中选择要打开的文章
2. 文章内容会显示在右侧编辑区域
3. 可直接在编辑区域修改文章内容

#### [C02b03].[保存文章]

操作步骤：

1. 修改文章内容后，点击顶部工具栏的"保存"按钮
2. 系统会保存文章到数据库
3. 显示"已保存"提示消息

#### [C02b04].[删除文章]

操作步骤：

1. 打开要删除的文章
2. 点击顶部工具栏的"删除"按钮
3. 系统会显示确认对话框
4. 点击"确定"删除文章

#### [C02b05].[搜索文章]

操作步骤：

1. 在顶部搜索框中输入关键词
2. 点击"搜索"按钮或按回车键
3. 左侧文章列表会显示搜索结果

#### [C02b06].[导出文章]

操作步骤：

1. 打开要导出的文章
2. 点击顶部工具栏的"导出"按钮
3. 选择导出格式（HTML、Markdown、纯文本）
4. 系统会导出文章到 exports 目录

#### [C02b07].[备份数据库]

操作步骤：

1. 点击顶部工具栏的"备份"按钮
2. 选择备份路径
3. 系统会备份数据库到指定路径

#### [C02b08].[恢复数据库]

操作步骤：

1. 点击顶部工具栏的"恢复"按钮
2. 选择备份文件
3. 系统会从备份文件恢复数据库

#### [C02b09].[导入数据]

操作步骤：

1. 点击顶部工具栏的"导入"按钮
2. 选择要导入的 JSON 文件
3. 系统会导入文件中的数据到数据库

#### [C02b10].[数据导出]

操作步骤：

1. 点击顶部工具栏的"数据导出"按钮
2. 选择导出路径
3. 系统会将所有数据导出为 JSON 文件

### [C02c].[主题切换]

操作步骤：

1. 点击顶部工具栏的"主题"按钮
2. 选择深色或浅色主题
3. 系统会立即应用所选主题

### [C02d].[侧边栏操作]

操作步骤：

1. 点击顶部工具栏的"折叠"按钮
2. 左侧边栏会折叠或展开
3. 再次点击可恢复侧边栏显示

## [C03].[快捷键操作]

### [C03a].[文件操作]

- **新建文章**：Ctrl+N
- **打开文章**：Ctrl+O
- **保存文章**：Ctrl+S
- **删除文章**：Ctrl+D
- **导出文章**：Ctrl+E

### [C03b].[编辑操作]

- **撤销**：Ctrl+Z
- **重做**：Ctrl+Y
- **复制**：Ctrl+C
- **粘贴**：Ctrl+V
- **剪切**：Ctrl+X

### [C03c].[搜索操作]

- **搜索**：Ctrl+F
- **清除搜索**：Esc

### [C03d].[界面操作]

- **折叠/展开侧边栏**：Ctrl+B
- **主题切换**：Ctrl+T
- **大纲视图**：Ctrl+O

## [C04].[数据库操作]

### [C04a].[数据库结构]

Wherite 使用 SQLite 数据库，数据库文件为 wherite.sqlite3。主要表结构如下：

#### [C04a01].[articles 表]

| 字段       | 类型    | 说明       |
| ---------- | ------- | ---------- |
| id         | INTEGER | 主键，自增 |
| title      | TEXT    | 文章标题   |
| content    | TEXT    | 文章内容   |
| created_at | TEXT    | 创建时间   |
| updated_at | TEXT    | 更新时间   |

#### [C04a02].[categories 表]

| 字段 | 类型    | 说明       |
| ---- | ------- | ---------- |
| id   | INTEGER | 主键，自增 |
| name | TEXT    | 分类名称   |

#### [C04a03].[tags 表]

| 字段 | 类型    | 说明       |
| ---- | ------- | ---------- |
| id   | INTEGER | 主键，自增 |
| name | TEXT    | 标签名称   |

#### [C04a04].[article_categories 表]

| 字段        | 类型    | 说明              |
| ----------- | ------- | ----------------- |
| article_id  | INTEGER | 文章 ID，外键关联 |
| category_id | INTEGER | 分类 ID，外键关联 |

#### [C04a05].[article_tags 表]

| 字段       | 类型    | 说明              |
| ---------- | ------- | ----------------- |
| article_id | INTEGER | 文章 ID，外键关联 |
| tag_id     | INTEGER | 标签 ID，外键关联 |

#### [C04a06].[images 表]

| 字段         | 类型    | 说明             |
| ------------ | ------- | ---------------- |
| id           | INTEGER | 主键，自增       |
| filename     | TEXT    | 文件名           |
| filepath     | TEXT    | 文件路径         |
| size         | INTEGER | 文件大小（字节） |
| content_type | TEXT    | MIME 类型        |
| created_at   | TEXT    | 创建时间         |

#### [C04a07].[settings 表]

| 字段  | 类型    | 说明       |
| ----- | ------- | ---------- |
| id    | INTEGER | 主键，自增 |
| key   | TEXT    | 配置项名称 |
| value | TEXT    | 配置项值   |

### [C04b].[数据库管理]

#### [C04b01].[数据库备份]

Wherite 提供了数据库备份功能，可以通过图形界面进行操作：

1. 点击顶部工具栏的"备份"按钮
2. 选择备份路径
3. 系统会使用 SQLite 的 VACUUM INTO 命令创建数据库备份

#### [C04b02].[数据库恢复]

Wherite 提供了数据库恢复功能，可以通过图形界面进行操作：

1. 点击顶部工具栏的"恢复"按钮
2. 选择备份文件
3. 系统会恢复数据库到备份时的状态

#### [C04b03].[数据导入]

Wherite 支持从 JSON 文件导入数据：

1. 点击顶部工具栏的"导入"按钮
2. 选择要导入的 JSON 文件
3. 系统会导入文件中的文章、分类、标签等数据

#### [C04b04].[数据导出]

Wherite 支持将所有数据导出为 JSON 文件：

1. 点击顶部工具栏的"数据导出"按钮
2. 选择导出路径
3. 系统会将所有数据导出为 JSON 文件

## [C05].[文件管理]

### [C05a].[图片管理]

Wherite 支持图片插入和管理功能：

1. 点击顶部工具栏的"图片"按钮
2. 选择要插入的图片文件
3. 图片会自动保存到 images 目录
4. 系统会在文章内容中插入 Markdown 图片语法

### [C05b].[导出文件管理]

Wherite 支持将文章导出为多种格式：

1. 点击顶部工具栏的"导出"按钮
2. 选择导出格式（HTML、Markdown、纯文本）
3. 导出文件会保存到 exports 目录
4. 文件名会自动生成，包含文章标题和时间戳

## [C06].[常见问题]

### [C06a].[程序无法启动]

问题描述：

- 程序无法启动或启动后崩溃

解决方案：

1. 检查是否安装了 Go 运行时环境（Go 1.25.4 或更高版本）
2. 检查数据库文件 wherite.sqlite3 是否存在且可访问
3. 检查 images 和 exports 目录是否存在且具有写入权限
4. 查看程序启动时的错误信息

### [C06b].[文章无法保存]

问题描述：

- 文章内容修改后无法保存

解决方案：

1. 检查数据库文件是否可写入
2. 检查磁盘空间是否充足
3. 检查文章内容是否包含特殊字符导致保存失败

### [C06c].[图片无法显示]

问题描述：

- 文章中的图片无法显示

解决方案：

1. 检查 images 目录是否存在
2. 检查图片文件是否存在且可访问
3. 检查图片文件格式是否支持（PNG、JPG、GIF、WEBP）

### [C06d].[导出功能失败]

问题描述：

- 文章导出功能失败

解决方案：

1. 检查 exports 目录是否存在且具有写入权限
2. 检查文章内容是否包含特殊字符导致导出失败
3. 尝试使用其他导出格式

---

## 命令文档总结

Wherite 项目提供了完整的图形界面操作，用户可以通过直观的界面完成所有功能。本文档详细介绍了程序的启动、基本操作、快捷键、数据库管理、文件管理等内容，帮助用户快速上手和解决常见问题。

对于高级用户，Wherite 还提供了数据库备份、恢复、导入、导出等功能，方便数据管理和迁移。同时，程序的架构和设计保证了系统的稳定性和可扩展性。
