# 项目概述

> 当前版本: ver 0.11

本文档记录 Wherite 项目的基本信息、核心功能和技术栈。

---

## [O01].[项目基础信息]

### [O01a].[项目名称]：Wherite - 文章管理系统

### [O01b].[项目启发]：

灵感来自对简洁高效文章管理工具的需求，旨在提供一个轻量级、功能完整的本地文章管理解决方案。用户可以在无需联网的情况下管理个人文章、笔记和文档。

### [O01c].[项目类型]：桌面应用程序 / 文章管理系统 / Markdown 编辑器

### [O01d].[一句话简介]：

基于 SQLite 数据库的本地文章管理系统，支持文章的查询、新建、编辑、删除，提供 Markdown 实时预览、语法高亮、主题切换等功能，采用纯 Go 技术栈实现跨平台支持。

## [O02].[核心功能]

### [O02a].[文章管理]：完整的文章增删改查功能

功能说明：

- 新建文章（自动生成自增 ID）
- 编辑文章内容（支持 Markdown 语法）
- 删除文章
- 文章重命名
- 文章搜索（按标题和内容搜索）

### [O02b].[分类与标签]：文章分类和标签管理

功能说明：

- 创建和管理文章分类
- 为文章分配分类
- 创建和管理文章标签
- 为文章添加多个标签
- 支持按分类和标签筛选文章

### [O02c].[Markdown 编辑]：Markdown 语法支持和实时预览

功能说明：

- Markdown 实时预览
- 语法高亮（标题、粗体、斜体、代码块等）
- 代码块语法高亮（支持多种编程语言）
- 大纲视图（自动提取标题层级）

### [O02d].[主题系统]：深色/浅色主题切换

功能说明：

- 支持深色和浅色主题切换
- 主题配置持久化
- 优化编辑器配色方案

### [O02e].[导出功能]：文章导出为多种格式

功能说明：

- 导出为 HTML 格式（带完整样式）
- 导出为 Markdown 文件
- 导出为纯文本格式
- 自动生成唯一文件名并创建 exports 目录

### [O02f].[图片管理]：图片插入和管理

功能说明：

- 图片拖拽插入
- 图片粘贴插入
- 图片存储和管理
- 图片预览功能
- 支持多种图片格式（PNG、JPG、GIF、WEBP）

### [O02g].[数据库管理]：数据库备份和恢复

功能说明：

- 数据库备份功能（使用 VACUUM INTO 命令）
- 数据库恢复功能
- 数据导入功能（从 JSON 文件导入）
- 数据导出功能（导出为 JSON 格式）

### [O02h].[用户体验优化]：提升用户使用体验的功能

功能说明：

- 自动保存功能（每 30 秒自动保存）
- 最近文件列表（显示最近 5 篇文章）
- 字数统计（实时显示字数、字符数、行数）
- 欢迎页面（友好的启动界面）
- 快捷操作（搜索、新建、保存等）

### [O02i].[系统功能]：系统级功能

功能说明：

- 可折叠侧边栏
- 快捷键系统
- 撤销/重做功能
- 数据库索引优化（提升查询性能）

## [O03].[技术栈]

### [O03a].[前端]（GUI 界面）：

Gio:版本号 0.9.0+

- 功能：纯 Go 图形界面框架，提供窗口、组件、事件处理

### [O03b].[后端]（Go 核心逻辑）：

Go:版本号 1.25.4+

- 功能：项目主语言

goldmark:版本号 1.7.15

- 功能：Markdown 解析库，支持 CommonMark 和 GFM 标准

### [O03c].[数据存储]：

SQLite3:版本号 3（通过 modernc.org/sqlite 驱动）

- 功能：本地数据库，存储文章、分类、标签、图片等信息

modernc.org/sqlite:版本号 1.26.0

- 功能：纯 Go SQLite 驱动，无需 CGO 依赖

## [O04].[部署环境依赖与快速启动]

### [O04a].[依赖版本]：

Go:版本号 1.25.4 或更高版本

### [O04b].[快速启动]：

1. 克隆项目

```
    git clone https://github.com/pyapple12/wherite.git
    cd wherite
```

2. 编译程序

```
   go build -o wherite
```

3. 运行程序

```
   # 直接运行
        ./wherite

   # Windows 系统
        wherite.exe
```

4. 访问地址：无网络服务，本地桌面应用

## [O05].[其他信息]

### [O05a].[项目作者]：pyapple12

### [O05b].[仓库地址]：https://github.com/pyapple12/wherite.git

## [O06].[可选补充]

适用场景：

- 个人文章管理与笔记记录
- 本地文档编写与管理
- Markdown 文档编辑与预览
- 无需联网的轻量级文档管理解决方案

注意事项：

- 程序使用本地 SQLite 数据库，数据存储在 wherite.sqlite3 文件中
- 图片存储在 images 目录中
- 导出文件保存到 exports 目录中
- 程序主要面向 Windows、Linux、macOS 平台
- 无需网络连接即可使用大部分功能

项目特点：

- 界面语言：中文为主
- 代码注释：中文
- 许可证：GPL-3.0
- 当前版本：ver 0.11
- 纯 Go 实现，无需 CGO 依赖，跨平台支持

## [O07].[项目文件]

### [O07a].[项目程序文件]：

```
文件名                    代码行数    说明
─────────────────────────────────────────────────────────
wherite_main.go                 - 主程序入口
wherite_gui.go                  - 图形界面模块
wherite_database.go             - 数据库操作模块
wherite_markdown.go             - Markdown 解析模块
wherite_syntax.go               - 语法高亮模块
wherite_theme.go                - 主题系统模块
wherite_outline.go              - 大纲视图模块
wherite_code_highlight.go       - 代码高亮模块
wherite_shortcuts.go            - 快捷键系统模块
wherite_undo.go                 - 撤销/重做模块
wherite_images.go               - 图片管理模块
wherite_export.go               - 导出功能模块
─────────────────────────────────────────────────────────
```

### [O07b].[项目文件结构]：

```
wherite/
├── workingboard/                 工作板文档
│   ├── 1. Overview.md            项目概述
│   ├── 2. Missions.md            任务列表
│   ├── 3. Problems.md            问题集
│   ├── 4. FurtherPlans.md        路线图
│   ├── 5. Archive.md             归档任务
│   ├── 6. Commands.md            命令文档
│   └── Guidelines/               指南文档
│       └── GitHub_README_Guide.md
├── wherite_main.go               主入口文件
├── wherite_gui.go                图形界面模块
├── wherite_database.go           数据库操作模块
├── wherite_markdown.go           Markdown 解析模块
├── wherite_syntax.go             语法高亮模块
├── wherite_theme.go              主题系统模块
├── wherite_outline.go            大纲视图模块
├── wherite_code_highlight.go     代码高亮模块
├── wherite_shortcuts.go          快捷键系统模块
├── wherite_undo.go               撤销/重做模块
├── wherite_images.go             图片管理模块
├── wherite_export.go             导出功能模块
├── images/                       图片存储目录
├── exports/                      导出文件目录
├── go.mod                        Go 模块依赖管理
├── go.sum                        依赖校验文件
├── wherite.sqlite3               SQLite 数据库文件
└── README.md                     项目说明文档
```

### [O07c].[数据库结构]：

Wherite 使用 SQLite 数据库，数据库文件为 wherite.sqlite3。主要表结构如下：

#### [O07c01].[articles 表]

| 字段       | 类型    | 说明       |
| ---------- | ------- | ---------- |
| id         | INTEGER | 主键，自增 |
| title      | TEXT    | 文章标题   |
| content    | TEXT    | 文章内容   |
| created_at | TEXT    | 创建时间   |
| updated_at | TEXT    | 更新时间   |

#### [O07c02].[categories 表]

| 字段 | 类型    | 说明       |
| ---- | ------- | ---------- |
| id   | INTEGER | 主键，自增 |
| name | TEXT    | 分类名称   |

#### [O07c03].[tags 表]

| 字段 | 类型    | 说明       |
| ---- | ------- | ---------- |
| id   | INTEGER | 主键，自增 |
| name | TEXT    | 标签名称   |

#### [O07c04].[article_categories 表]

| 字段        | 类型    | 说明              |
| ----------- | ------- | ----------------- |
| article_id  | INTEGER | 文章 ID，外键关联 |
| category_id | INTEGER | 分类 ID，外键关联 |

#### [O07c05].[article_tags 表]

| 字段       | 类型    | 说明              |
| ---------- | ------- | ----------------- |
| article_id | INTEGER | 文章 ID，外键关联 |
| tag_id     | INTEGER | 标签 ID，外键关联 |

#### [O07c06].[images 表]

| 字段         | 类型    | 说明             |
| ------------ | ------- | ---------------- |
| id           | INTEGER | 主键，自增       |
| filename     | TEXT    | 文件名           |
| filepath     | TEXT    | 文件路径         |
| size         | INTEGER | 文件大小（字节） |
| content_type | TEXT    | MIME 类型        |
| created_at   | TEXT    | 创建时间         |

#### [O07c07].[settings 表]

| 字段  | 类型    | 说明       |
| ----- | ------- | ---------- |
| id    | INTEGER | 主键，自增 |
| key   | TEXT    | 配置项名称 |
| value | TEXT    | 配置项值   |
