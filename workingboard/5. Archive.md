# 归档计划和任务总纲

> 当前版本: ver 0.11

本文档记录 Wherite 项目的历史归档任务和已完成的功能。

---

# 归档计划

---

# 归档错误

---

## [AP01].[致命]

### [AP01a].[CGO 依赖导致编译失败]

问题描述：

- 早期版本使用 github.com/mattn/go-sqlite3 驱动，需要 CGO 依赖
- 在某些平台上编译困难，特别是 Windows 系统
- 可能导致程序无法启动或崩溃

问题影响：

- 严重影响程序的可移植性和部署
- 用户可能无法在某些系统上运行程序

优先级：致命

状态：[✅ 修复完成]

### [AP01b].[数据丢失风险]

问题描述：

- 用户忘记保存文章内容可能导致数据丢失
- 没有自动保存功能
- 程序崩溃可能导致未保存的内容丢失

问题影响：

- 严重影响用户数据安全
- 可能导致重要信息丢失

优先级：致命

状态：[✅ 修复完成]

## [AP02].[严重]

### [AP02a].[文章列表显示性能下降]

问题描述：

- 文章数量较多时，列表显示和搜索性能下降
- 数据库查询没有索引优化
- 可能导致界面卡顿或无响应

问题影响：

- 严重影响用户体验
- 大量文章时程序可用性降低

优先级：严重

状态：[✅ 修复完成]

### [AP02b].[启动速度优化]

问题描述：

- 程序启动时加载所有文章数据，导致启动时间过长
- 可能导致用户等待时间过长

问题影响：

- 影响用户体验
- 降低程序的响应速度

优先级：严重

状态：[✅ 修复完成]

## [AP03].[一般]

### [AP03a].[Gio GUI 框架学习曲线]

问题描述：

- Gio 是较新的 Go GUI 框架，文档和示例相对较少
- 立即模式 GUI 编程模型需要适应
- 可能影响开发效率

问题影响：

- 开发过程中需要更多时间学习和调试
- 可能导致开发周期延长

优先级：一般

状态：[✅ 修复完成]

### [AP03b].[代码模块化不足]

问题描述：

- 早期版本代码耦合度高，难以维护
- 所有功能集中在单一文件中
- 影响代码的可读性和可扩展性

问题影响：

- 维护成本高
- 新增功能困难

优先级：一般

状态：[✅ 修复完成]

### [AP03c].[Markdown 解析性能]

问题描述：

- 大篇幅文章的 Markdown 解析和预览性能不佳
- 实时预览可能导致界面卡顿

问题影响：

- 影响用户体验
- 大文章编辑时可能出现延迟

优先级：一般

状态：[✅ 修复完成]

### [AP03d].[配置管理]

问题描述：

- 主题、用户配置等没有持久化存储
- 每次启动程序都需要重新配置
- 影响用户体验的一致性

问题影响：

- 用户需要重复配置
- 降低了程序的易用性

优先级：一般

状态：[✅ 修复完成]

---

## 问题解决记录

### [P01a] 解决时间：2025-01-08

- 问题：CGO 依赖导致编译困难
- 解决方案：改用 modernc.org/sqlite 驱动
- 结果：成功移除 CGO 依赖，提高了编译和运行的稳定性

### [P01b] 解决时间：2025-01-08

- 问题：数据丢失风险
- 解决方案：实现自动保存功能
- 结果：减少了数据丢失的可能性，提升了用户体验

### [P02a] 解决时间：2025-01-08

- 问题：文章列表显示性能下降
- 解决方案：添加数据库查询索引
- 结果：查询速度显著提升，用户体验改善

### [P02b] 解决时间：2025-01-08

- 问题：启动速度优化
- 解决方案：实现数据库索引优化和延迟加载
- 结果：启动时间显著缩短

### [P03a] 解决时间：2025-01-08

- 问题：Gio GUI 框架学习曲线
- 解决方案：深入学习官方文档和示例代码
- 结果：掌握了 Gio 框架的使用方法

### [P03b] 解决时间：2025-01-08

- 问题：代码模块化不足
- 解决方案：进行模块化拆分
- 结果：代码结构更清晰，可维护性提高

### [P03c] 解决时间：2025-01-08

- 问题：Markdown 解析性能
- 解决方案：使用高效的 goldmark 库
- 结果：解析速度提升，预览更流畅

### [P03d] 解决时间：2025-01-08

- 问题：配置管理
- 解决方案：实现配置管理系统
- 结果：配置能够持久化存储

---

# 归档任务

---

## [AM01].[基础功能完善]：（✅ 已完成）

### [AM01a].[数据库连接与查询]

状态：✅ 已完成

优先级：最高

需求描述：

- 实现 SQLite 数据库连接
- 根据文章 ID 查询文章
- 基础的输入验证和错误处理

### [AM01b].[图形界面开发]

状态：✅ 已完成

优先级：最高

需求描述：

- 集成 Gio GUI 框架
- 实现基础图形界面布局
- 完成文章查询的图形化操作

### [AM01c].[文章管理功能]

状态：✅ 已完成

优先级：最高

需求描述：

- 新增"新建"按钮，支持创建新文章
- 创建新文章后自动生成自增 ID
- 实现新建和编辑两种保存模式
- 添加成功提示信息反馈

## [AM02].[模块化重构]：（✅ 已完成）

### [AM02a].[代码模块化拆分]

状态：✅ 已完成

优先级：高

需求描述：

- 实现代码模块化拆分，分离关注点
- 创建 `wherite_main.go` 作为主入口程序
- 创建 `wherite_gui.go` 作为图形界面模块
- 创建 `wherite_database.go` 作为数据库操作模块
- 建立清晰的模块间通信架构

## [AM03].[核心功能增强]：（✅ 已完成）

### [AM03a].[文章列表与搜索]

状态：✅ 已完成

优先级：高

需求描述：

- 实现文章列表显示，包含标题、创建时间和摘要
- 支持文章搜索功能，支持按标题和内容搜索
- 优化数据库结构，添加查询索引

### [AM03b].[分类与标签系统]

状态：✅ 已完成

优先级：高

需求描述：

- 实现完整的文章分类系统，支持创建和分配分类
- 实现完整的文章标签系统，支持创建和管理多个标签
- 优化数据库结构，添加 categories、tags 表及关联表

### [AM03c].[Markdown 编辑器优化]

状态：✅ 已完成

优先级：高

需求描述：

- 集成 Markdown 解析库（goldmark）
- 实现 Markdown 实时预览
- 支持基础 Markdown 语法（标题、列表、代码块、粗体、斜体等）
- 实现编辑器语法高亮

## [AM04].[高级功能开发]：（✅ 已完成）

### [AM04a].[主题系统]

状态：✅ 已完成

优先级：中

需求描述：

- 设计深色/浅色主题
- 实现主题切换功能
- 优化编辑器配色方案
- 添加主题配置持久化

### [AM04b].[大纲视图]

状态：✅ 已完成

优先级：中

需求描述：

- 实现大纲视图（自动提取标题）
- 支持点击大纲项跳转到对应位置
- 扩展 Markdown 解析器，支持表格语法

### [AM04c].[代码高亮]

状态：✅ 已完成

优先级：中

需求描述：

- 实现代码块语法高亮，支持 Go、JavaScript、Python 等语言
- 提供代码高亮配置

### [AM04d].[快捷键系统]

状态：✅ 已完成

优先级：中

需求描述：

- 创建快捷键系统，支持常用编辑操作快捷键
- 实现快捷键注册和事件处理

### [AM04e].[撤销/重做功能]

状态：✅ 已完成

优先级：中

需求描述：

- 实现撤销/重做功能，支持操作历史管理
- 提供操作历史查询功能

## [AM05].[导出与图片支持]：（✅ 已完成）

### [AM05a].[导出功能]

状态：✅ 已完成

优先级：中

需求描述：

- 支持导出为 HTML
- 支持导出为 Markdown 文件
- 支持导出为纯文本
- 实现导出对话框，用户可选择导出格式

### [AM05b].[图片管理]

状态：✅ 已完成

优先级：中

需求描述：

- 实现图片拖拽插入
- 实现图片粘贴插入
- 图片存储和管理
- 图片预览功能

## [AM06].[用户体验优化]：（✅ 已完成）

### [AM06a].[自动保存功能]

状态：✅ 已完成

优先级：中

需求描述：

- 添加自动保存功能，每 30 秒自动保存文章内容
- 使用 time.Timer 实现防抖动机制
- 显示"已自动保存"提示消息

### [AM06b].[最近文件列表]

状态：✅ 已完成

优先级：中

需求描述：

- 在欢迎页面显示最近 5 篇文章
- 支持点击快速打开文章
- 使用数据库 settings 表存储最近文章信息

### [AM06c].[字数统计]

状态：✅ 已完成

优先级：中

需求描述：

- 添加字数统计功能，实时显示字数、字符数和行数
- 支持中英文混合统计
- 在编辑器底部显示统计信息

### [AM06d].[欢迎页面]

状态：✅ 已完成

优先级：中

需求描述：

- 实现欢迎页面，提供友好的启动界面
- 显示应用名称和版本信息
- 提供快速开始按钮（新建文章）
- 显示最近打开的文章列表

## [AM07].[数据库扩展]：（✅ 已完成）

### [AM07a].[数据库备份与恢复]

状态：✅ 已完成

优先级：高

需求描述：

- 实现数据备份和恢复
- 使用 SQLite 的 VACUUM INTO 命令创建数据库备份
- 支持从备份文件恢复数据库
- 提供完整的数据迁移方案

### [AM07b].[数据导入/导出]

状态：✅ 已完成

优先级：中

需求描述：

- 使用 JSON 格式进行数据交换
- 支持文章、分类、标签的批量导入导出
- 便于数据迁移和备份

## [AM08].[性能优化]：（✅ 已完成）

### [AM08a].[数据库索引优化]

状态：✅ 已完成

优先级：中

需求描述：

- 优化查询性能
- 为 articles 表的 created_at 和 updated_at 字段添加索引
- 为 article_categories 和 article_tags 表的外键添加索引

---

## 版本规划

| 版本     | 主要特性           | 状态      |
| -------- | ------------------ | --------- |
| ver 0.01 | 技术先行版本       | ✅ 完成   |
| ver 0.02 | GUI 过渡版本       | ✅ 完成   |
| ver 0.03 | 图形化实验版       | ✅ 完成   |
| ver 0.04 | 模块化拆分版       | ✅ 完成   |
| ver 0.05 | 新增功能版本       | ✅ 完成   |
| ver 0.06 | 分类标签与搜索功能 | ✅ 完成   |
| ver 0.07 | 主题系统与高级功能 | ✅ 完成   |
| ver 0.08 | 图片支持系统       | ✅ 完成   |
| ver 0.09 | 导出功能系统       | ✅ 完成   |
| ver 0.10 | 用户体验优化系统   | ✅ 完成   |
| ver 0.11 | 数据库扩展系统     | ✅ 完成   |
| ver 0.12 | PDF 导出功能       | ⏳ 待开发 |
| ver 0.13 | 打包和分发优化     | ⏳ 待开发 |
| ver 1.0  | 完整功能版本       | ⏳ 待开发 |

## 更新日志

### 版本更新记录

[初始版本]

- 2025-01-08: 创建 MISSION.md，版本 ver 0.01

[M01 完成]

- 2025-01-08: 基础功能完善，版本 ver 0.05

[M02 完成]

- 2025-01-08: 模块化重构，版本 ver 0.04

[M03 完成]

- 2025-01-08: 核心功能增强，版本 ver 0.06

[M04 完成]

- 2025-01-08: 高级功能开发，版本 ver 0.07

[M05 完成]

- 2025-01-08: 导出与图片支持，版本 ver 0.08-0.09

[M06 完成]

- 2025-01-08: 用户体验优化，版本 ver 0.10

[M07 完成]

- 2025-01-08: 数据库扩展，版本 ver 0.11
